using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;

namespace Day3
{
    class Program
    {
        private static readonly string[] input =
        {
            ".........#.#.#.........#.#.....", "...#......#...#.....#.....#....", "#.....#.....#.....#.#........#.",
            "......#..#......#.......#......", ".#..........#.............#...#", "............#..##.......##...##",
            "....#.....#..#....#............", ".#..#.........#....#.#....#....", "#.#...#...##..##.#..##..#....#.",
            ".#.......#.#...#..........#....", "...#...#........##...#..#.....#", "..................#..........#.",
            ".....#.##..............#.......", "........#....##..##....#.......", "...#.....#.##..........#...##..",
            ".......#.#....#............#...", "..............#......#......#..", "#.......#...........#........##",
            ".......#.......##......#.......", "................#....##...#.#.#", "#.......#....................#.",
            ".##.#..##..#..#.#.....#.....#..", "#...#............#......##....#", ".#....##.#......#.#......#..#..",
            "..........#........#.#.#.......", "...#...#..........#..#....#....", "..#.#...#...#...##...##......#.",
            "......#...#........#.......###.", "....#...............#.###...#.#", "..................#.....#..#.#.",
            ".#...#..#..........#........#..", "#..........##................##", "...#.....#...#......#.#......#.",
            "......#..........#.#......#..#.", "..#......#.....................", "............#.........##.......",
            "......#.......#........#.......", "#.#...#...........#.......#....", ".#.#........#.#.#....#........#",
            "#.....##........#.#.....#.#....", ".#...#..........##...#.....#..#", ".........#....###............#.",
            "..#...#..............#.#.#.....", ".....#.#.#..#.#.#.###......#.#.", ".#.##...#.......###..#.........",
            ".....##....#.##..#.##..#.......", "..#...........##......#..#.....", "................##...#.........",
            "##.....................#..#.###", "...#..#....#...........#.......", ".#.............##.#.....#.#....",
            ".......#.#.#....##..#....#...#.", "...##..#..........#....#.......", "....##......#.........#........",
            ".##....#...........#.#.......#.", "...#...#.##.......#.#..........", "..#.........#.##...........#...",
            "....#.##........#.......#...##.", "...................#..#..#...##", "#...#......###..##.#..###......",
            "#.............#.#........#...#.", "...#...#..#..#..............#..", "#.....#..#...#...#......#.#..#.",
            "...##.............#........##.#", "......#.#.........#.#....#...#.", "........##............#...#....",
            "............#.#...#......#.....", "...#...........#...#...........", ".........#.#......#............",
            "....#.............#..#.....#..#", "#.....#...........#.....#.#.#.#", ".............#.....##......#...",
            "...................###.#......#", "#.##.....#...#..#..#...#....#..", "............#.....#....#.#.....",
            "#....#..#..........#....#..#...", "..........##..................#", "....#.......###..#......###....",
            ".......#...#.##.##..#....##....", "...##...............#.....#...#", "#...........#...#......#..#..#.",
            "..##....#.......#...#.....#....", ".......##..............#.##..#.", ".#......#..........#.......#...",
            "....##...................#.#..#", "......#....###................#", ".#........#...........#........",
            ".#.....##....#..##...........#.", "##..............##...#.......#.", "......#..........#..........##.",
            "..#.....#.#.........####....#..", ".............#......#......#...", "..#.............#...........##.",
            "#.#...#........#..........##...", "...#....#.....#.....#.....##...", "......#........................",
            "......#..#...#......#.....#....", "......#....##.....#....#.......", "#.#......#.##..#...............",
            "..........#.#.##..##..#........", "......#.#..#....###.#..........", "........................#....#.",
            "#.#.............#....#.....##.#", ".#.#..........#.......#..#....#", "..#...#......#..#..#...#.#...#.",
            "...#.##...###..................", "........#.#...........#...#....", "........#..........#....#......",
            "#....#........#.......##.....#.", "......###...##...#......#......", "............#.......#.....##..#",
            "....#..#.......##......#.......", "#............##................", "...............#..#......#...#.",
            ".#....##...#......#............", "#...#................#.........", "..#....#..#........##......#...",
            "....#....###......##.#.......#.", "......#.#..#.#..#....#..#......", "....#..........#..#..#.........",
            ".#..#.......#......#........#..", ".......#..#..#............#....", ".............#...#....#..#.....",
            "..............#.#.#.........#..", "#.....##.......#....#..........", "...#.....#......#..............",
            "...##.#..#.#........#..##....#.", ".......#.#.....##..#...........", ".....#.#....#..................",
            ".#......#.###..............##..", "..#....#...#..#...##...##....#.", "..........##..#...#..#.........",
            "..#............#........#.#...#", ".........................#.#.#.", "......#........#.#..#......##.#",
            "#.#......#..#.........#........", ".....#........#......#...#.#...", "........##....##....#.#........",
            "....#....#.#...#...##....#..#..", "#.............#.....#..........", "#............##..#............#",
            "..#.#......#........#..........", ".#......#......#.#.##.##.......", "..#.....#..........#......##...",
            "...#......#...#.##....#.....##.", "......#......#...........#.#...", "....#........#..#..#........#.#",
            "....#.........#.....#...#.#.#..", "....#.....###........#.........", ".............##........#.#.....",
            "...#............#........#.#.#.", "......#....#.......#.#.........", ".....#................#........",
            ".#....#..#.#.............#...#.", "#..##...#............#......#..", "...#..#........................",
            ".#.#...........#.......#.......", "#....###............##.........", "...##....#.#............##.....",
            ".........####......#........#..", ".....#.......#.#...............", ".......#...#.###..#....#...#..#",
            "...#.....##..#....#..#.#...###.", ".............#........#.#.#..#.", "................#..........##..",
            ".......####..##..##........##.#", "..#......#..#..#.#.##..........", "#....#........#....#...###.#.#.",
            "........##........##.....#.....", "...........#.#...........#....#", "#.............#...........#....",
            "...#.........#...#....#.....#..", "..##......#...#...............#", ".............#.........#....#..",
            "..#...........#..#........#.##.", ".#.#......#.............##...#.", ".#......#.....##.#..#..#.......",
            "....##......#..................", ".#.#..##............#....#....#", "........#...##.............#..#",
            "........#....##.....#......###.", ".........#....#.#..............", "#.....#........................",
            ".#..#....#.....#......#.###..#.", "..........#...#....##....#..#..", "...#.#.#...##..#..#......#..#.#",
            "#............#.....#....#......", "#.###...#.#......###..#....#..#", "...#.###........#......#....#..",
            "..#.##...#.........#.#.........", "............##.................", "....#..........#.#.#.#.#....#..",
            "...##.#...#.......#.......##..#", "....##.#........#....#...#.....", ".............#.#....#...#.....#",
            "...#......................##...", "..#...#.....#.....#........#..#", "..#..#.......#....#..##.....#..",
            "..#..#.#.......................", ".......##..#....#....#..#......", "....#......##....#............#",
            ".#...#..#..#.##...#.#...#......", ".....#......#....#.........#...", ".##......##.........#....#.....",
            "#...........#...##.....#......#", ".....#.#.......#.........#.....", ".........#..........#..####.##.",
            "............#..#......#.#......", ".#.............#........#.#....", "......#......#...#..#....#####.",
            ".........##.#..##...###..#....#", "....#.#....#.#..#.........#....", "..#.............#...##...##....",
            "........#..........#.##..#....#", ".....#...#..##........#.#..#...", "##..#.#.....#............#.....",
            ".............#........##...##..", "#......####.....##.............", "..##.....##....###..#.#....#...",
            "......##.##.#...#..#.#..##.....", "......#.................#......", "#.....#.#...#......#.#....#....",
            "....#.#........#..............#", "##........#.......##.#...##...#", "..#..................#.#....#..",
            "...........#..........#.#.....#", "........##.#.....#......#..#..#", ".....#....#..#.....#.........##",
            "#.#..#..#...#......#..........#", "#...##.....#..#.#.......#.##...", "..#....##...............#......",
            "#..........#.#.........#.#....#", "..............#......#....#....", ".....#...........#...#...#...#.",
            "...#......#....#....#..........", ".#..........#.#....##..##....#.", "..............#.........#.#....",
            ".......#.....#.....#...##....#.", "##.#.........#....#.....#.#....", "....#..#......#................",
            "......##.....#.......##........", ".....##...#........#...#...#...", "..#...#...#..#..#.#......#..#..",
            "....#...#.......#..............", "....#..#.........###........#..", "....#.............##..#........",
            "..........##.#.......##..##....", "#.##..................#.....#..", "#........#........#.....#......",
            ".#...#......#..................", "#....##.##......#...#.........#", "......#.##..##................#",
            "............#.........##.......", "..........####.#........#.....#", ".##...#...#....#..#............",
            ".#.##...#..#...#......#......##", ".....#.#....#..###......#.#.#..", "...#.......................##..",
            "......................#.......#", "..#....#.........#..#.#.....#..", ".#....#..#....#...#............",
            "..........#...##.....#.#..#....", "........#..#..#....#...#...#...", ".....#......#.#................",
            ".....#...........#...#.........", ".....#...##..#.#....#..#.....#.", "#.......#.............##.......",
            "................#....#.#..#....", ".#..##...#.#........#......#.#.", ".#.##..........#...............",
            "....##......#....#........#....", "....#..#....#.##.#.............", ".......#..#......##.#.....#....",
            ".......#.....#.............#...", ".....#....#.......#............", "........#.#...##..##..##.......",
            "#.........##....##...##........", "........#..#.#..........###.#..", "..........................#.#..",
            "#.....#.......#..#........#....", "...##.....#.......#......#.....", ".#.#..#...........#...........#",
            ".....##..#........#...####.....", ".#.#...##.#.#..#..#.#..#.......", "..#.##.#...#.#.#...#..#........",
            "............#..........#..#....", "...............#..##.#.........", ".............#.....#....#......",
            "...##..##......##..........#...", "..#.......#....#..........#...#", ".##................#.#.#.......",
            ".....##.....#..#.....#.........", "......#.#.......#......#..#....", ".....#.....#........#.......##.",
            "......#.......##......#...#...#", "....#...........###.........#..", "...#.....#.........##........#.",
            "..#.....#..............#.......", "....#.......#...#....#....#..##", "......#...........#...........#",
            ".##......#......#.#.....#.##...", "....#..##......#...#..#.#.###..", ".......#.#....#......#..#......",
            "..........#........#...........", "#.##.........#.#.#...#...#.#...", ".#......###.....#....#.#....#..",
            "...................##..#.......", "....#..#..............#.#.....#", "#..................#.....#.....",
            "...........##.##.......#..#.#..", "........#.#......#...........#.", "#..#.......#...#...........#.#.",
            "......##...........#...........", ".........#.#........#........#.", "#......#....#.#.....#..#.......",
            "............#..#.....##...#....", ".#......#..#......#.........#..", ".......#...#.........#.##.....#",
            "........................#..#...", ".###..............#.#..#.......", ".....#.........#.......#......#",
            "..##..##....#.....#.......#.#..", "...###.#..#.##............#...."
        };

        static void Main(string[] args)
        {
            a();
            Console.ReadKey();
            b();
        }

        static void a()
        {
            var width = input[0].Length;
            var trees = 0;
            var j = 0;
            for (var i = 0; i < input.Length; i++)
            {
                var position = input[i][j % width];
                Console.WriteLine($"({i},{j}): {input[i][j % width]}");
                if (position.Equals('#'))
                {
                    trees++;
                }

                j += 3;
            }

            Console.WriteLine($"Bumped into {trees} trees");
        }



        static void b()
        {
            var slopes = new int[,]
            {
                {1, 1, 0},
                {3, 1, 0},
                {5, 1, 0},
                {7, 1, 0},
                {1, 2, 0}
            };
            for (var i = 0; i < slopes.GetLength(0); i++)
            {
                var x = slopes[i, 0];
                var y = slopes[i, 1];
                Console.WriteLine($"Left: {x}, Down: {y}");
                var trees = 0;
                var width = input[0].Length;
                var k = 0;
                for (var row = 0; row < input.Length; row = row + y)
                {
                    var position = input[row][k % width];
                    //Console.WriteLine($"({j},{k}): {input[j][k % width]}");
                    if (position.Equals('#'))
                    {
                        trees++;
                    }

                    k += x;
                }

                slopes[i, 2] = trees;
                Console.WriteLine($"Bumped into {trees} trees");
            }

            Console.WriteLine(
                $"{slopes[0, 2]}*{slopes[1, 2]}*{slopes[2, 2]}*{slopes[3, 2]}*{slopes[4, 2]} = {slopes[0, 2] * slopes[1, 2] * slopes[2, 2] * slopes[3, 2] * slopes[4, 2]}");
        }
    }
}
